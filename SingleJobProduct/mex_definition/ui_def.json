{
  "firstPage": "UpsertJobProductPage",
  "pages": {
    "UpsertJobProductPage": {
      "title": "RiskAssessmentPage.InfoHeader",
      "type": "flat",
      "wipeExistingData": false,
      "pageDataExpression": "formData.RiskAssessment",
      "defaultPageData": {
        "data": {},
        "objectName": "RiskAssessment"
      },
      "upsert": {
        "validator": [],
        "saveDraft": {
          "askWhenBack": true
        }
      },
      "items": [
        {
          "type": "textEditor",
          "valueExpression": "pageData.Name",
          "title": "form.UpsertJobProductPage.Name",
          "placeholder": "form.UpsertJobProductPage.NameHint",
          "validator": [
            {
              "type": "expression",
              "errorMessage": "form.UpsertJobProductPage.NameRequired",
              "expression": "pageData.Name"
            }
          ]
        },
        {
          "type": "selectEditor",
          "title": "form.UpsertJobProductPage.Product",
          "structureExpression": "pageData.Product",
          "valueExpression": "pageData.ProductId",
          "sourceExpression": "sharedData.Products",
          "displayExpression": "pageData.Product.Name",
          "placeholder": "form.UpsertJobProductPage.SelectProductHint",
          "selectPage": {
            "itemTitle": "form.JobProductSelectPage.ItemTitle",
            "emptyText": "form.JobProductSelectPage.Empty",
            "title": "form.JobProductSelectPage.Title",
            "searchBar": {
              "filterOnProperties": ["Name", "Description"]
            }
          },
          "validator": [
            {
              "type": "expression",
              "expression": "pageData.ProductId",
              "errorMessage": "form.UpsertJobProductPage.JobProductIsRequired"
            }
          ]
        },

        
        {
          "type": "textEditor",
          "keyboardType": "number-pad",
          "valueExpression": "pageData.Qty",
          "title": "form.UpsertJobProductPage.Quantity",
          "placeholder": "form.UpsertJobProductPage.QuantityHint",
          "validator": [
            {
              "type": "expression",
              "errorMessage": "form.UpsertJobProductPage.QuantityMustBeAbove0",
              "expression": "pageData.Qty > 0 && pageData.Qty <= 1000"
            }
          ]
        },
        {
          "type": "attachmentsEditor",
          "sourceExpression": "pageData",
          "title": "form.UpsertJobProductPage.AddAttachment",
          "validator": [
            {
              "type": "expression",
              "expression": "attachments.length > 0",
              "errorMessage": "form.UpsertJobProductPage.AttachmentRequired"
            }
          ]
        }
      ]
    }
  }
}
